# üöÄ Neon Postgres Setup Guide

## –ü–æ—á–µ–º—É Neon?

‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω:**
- 512 MB storage (–≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ —á–µ–º Vercel Postgres!)
- 3 GiB data transfer
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (—ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã)
- Unlimited compute hours

‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- Serverless Postgres
- –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –±—Ä–∞–Ω—á–∏ –ë–î (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- Point-in-time recovery
- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Vercel

---

## üìã –®–∞–≥–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Neon –Ω–∞ Vercel

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å Neon –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –Ω–∞ Vercel

1. –û—Ç–∫—Ä–æ–π **Vercel Dashboard**: https://vercel.com/dashboard
2. –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç (lena-schneider-fusspflege)
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **Storage** ‚Üí **Create Database**
4. –í—ã–±–µ—Ä–∏ **Neon** –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
5. –ù–∞–∂–º–∏ **Continue**

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å Neon –ø—Ä–æ–µ–∫—Ç

1. –ï—Å–ª–∏ —É —Ç–µ–±—è **–Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ Neon**:
   - –°–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Vercel
   - –ò–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –Ω–∞ https://neon.tech

2. **–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:**
   - Project name: `lena-fusspflege-production`
   - Region: **Europe (Frankfurt)** üá©üá™ (–±–ª–∏–∂–µ –∫ –ì–µ—Ä–º–∞–Ω–∏–∏!)
   - Postgres version: **16** (–ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è)
   - Compute size: **Shared** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

3. –ù–∞–∂–º–∏ **Create Project**

### –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ Vercel

1. Vercel —Å–ø—Ä–æ—Å–∏—Ç: "Connect to Neon project?"
2. –í—ã–±–µ—Ä–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç `lena-fusspflege-production`
3. –í—ã–±–µ—Ä–∏ **Database**: `neondb` (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
4. –ù–∞–∂–º–∏ **Connect**

‚úÖ Vercel **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç** —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```env
POSTGRES_URL=postgresql://user:pass@ep-xxx.eu-central-1.aws.neon.tech/neondb?sslmode=require
POSTGRES_PRISMA_URL=postgresql://user:pass@ep-xxx.eu-central-1.aws.neon.tech/neondb?sslmode=require&pgbouncer=true
POSTGRES_URL_NON_POOLING=postgresql://user:pass@ep-xxx.eu-central-1.aws.neon.tech/neondb?sslmode=require
POSTGRES_USER=user
POSTGRES_HOST=ep-xxx.eu-central-1.aws.neon.tech
POSTGRES_PASSWORD=xxxxx
POSTGRES_DATABASE=neondb
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

1. –û—Ç–∫—Ä–æ–π **Neon Dashboard**: https://console.neon.tech
2. –í—ã–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç `lena-fusspflege-production`
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **SQL Editor**
4. –°–∫–æ–ø–∏—Ä—É–π **–í–°–Å –°–û–î–ï–†–ñ–ò–ú–û–ï** —Ñ–∞–π–ª–∞ `lib/db/schema.sql`
5. –í—Å—Ç–∞–≤—å –≤ SQL Editor
6. –ù–∞–∂–º–∏ **Run** (–∏–ª–∏ Ctrl/Cmd + Enter)

‚úÖ –î–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞—Ç—å—Å—è 3 —Ç–∞–±–ª–∏—Ü—ã:
- `bookings` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `blocked_dates` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã
- `settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. –í Neon SQL Editor –≤—ã–ø–æ–ª–Ω–∏:
```sql
SELECT table_name
FROM information_schema.tables
WHERE table_schema = 'public';
```

2. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:
```
bookings
blocked_dates
settings
```

‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞!

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

### 1. –°–∫–æ–ø–∏—Ä—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ Vercel

1. Vercel Dashboard ‚Üí —Ç–≤–æ–π –ø—Ä–æ–µ–∫—Ç ‚Üí **Settings** ‚Üí **Environment Variables**
2. –°–∫–æ–ø–∏—Ä—É–π –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `POSTGRES_`
3. –°–æ–∑–¥–∞–π `.env.local`:

```env
POSTGRES_URL=postgresql://user:pass@ep-xxx.eu-central-1.aws.neon.tech/neondb?sslmode=require
POSTGRES_PRISMA_URL=postgresql://user:pass@ep-xxx.eu-central-1.aws.neon.tech/neondb?sslmode=require&pgbouncer=true
POSTGRES_URL_NON_POOLING=postgresql://user:pass@ep-xxx.eu-central-1.aws.neon.tech/neondb?sslmode=require

# –¢–∞–∫–∂–µ –¥–æ–±–∞–≤—å –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
TELEGRAM_BOT_TOKEN=your_token
TELEGRAM_CHAT_ID=your_chat_id
RESEND_API_KEY=your_resend_key
```

### 2. –ó–∞–ø—É—Å—Ç–∏ dev —Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–û—Ç–∫—Ä–æ–π: http://localhost:3000
–ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
–ü—Ä–æ–≤–µ—Ä—å –≤ Neon Dashboard ‚Üí Tables ‚Üí bookings

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Neon –Ω–∞–¥ Vercel Postgres

| –§—É–Ω–∫—Ü–∏—è | Vercel Postgres | Neon |
|---------|----------------|------|
| Storage | 256 MB | **512 MB** ‚úÖ |
| Compute hours | 60 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü | **Unlimited** ‚úÖ |
| –ê–≤—Ç–æ–ø–∞—É–∑–∞ | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (—ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã) |
| –ë—Ä–∞–Ω—á–∏ –ë–î | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) |
| Point-in-time recovery | ‚ùå –ù–µ—Ç | ‚úÖ 7 –¥–Ω–µ–π |
| –ê–≤—Ç–æ–±—ç–∫–∞–ø—ã | –ë–∞–∑–æ–≤—ã–µ | ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ |
| –†–µ–≥–∏–æ–Ω | US West | **Europe Frankfurt** ‚úÖ |

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Neon

### –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

1. Neon Dashboard ‚Üí —Ç–≤–æ–π –ø—Ä–æ–µ–∫—Ç
2. **Usage** - —Å–º–æ—Ç—Ä–∏:
   - Storage used (–∏–∑ 512 MB)
   - Active time (–∞–≤—Ç–æ–ø–∞—É–∑–∞ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
   - Data transfer (–∏–∑ 3 GiB)

### –ê–≤—Ç–æ–ø–∞—É–∑–∞:

Neon –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–≤–∏—Ç –ë–î –Ω–∞ –ø–∞—É–∑—É –ø–æ—Å–ª–µ **5 –º–∏–Ω—É—Ç** –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ (<1 —Å–µ–∫—É–Ω–¥—ã)
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É —Å–∞–π—Ç–∞

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### SSL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

Neon **–≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SSL**:
```
?sslmode=require
```

### IP Whitelist (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø:
1. Neon Dashboard ‚Üí –ø—Ä–æ–µ–∫—Ç ‚Üí **Settings** ‚Üí **IP Allow**
2. –î–æ–±–∞–≤—å IP Vercel: `76.76.21.0/24` (–≤—Å–µ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç—ã Vercel)

---

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "Connection timeout"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ä–µ–≥–∏–æ–Ω Neon = `Europe (Frankfurt)`
- –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Vercel (–¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `postgresql://`)

### –û—à–∏–±–∫–∞: "Database does not exist"

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Å—å —á—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª SQL –∏–∑ `lib/db/schema.sql` –≤ Neon SQL Editor
- –ü—Ä–æ–≤–µ—Ä—å –≤ Neon Dashboard ‚Üí Tables

### –û—à–∏–±–∫–∞: "Too many connections"

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π `POSTGRES_PRISMA_URL` —Å connection pooling
- Neon –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—É–ª–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤ –±—É–¥—É—â–µ–º)

–ö–æ–≥–¥–∞ —Å–∞–π—Ç –≤—ã—Ä–∞—Å—Ç–µ—Ç, –º–æ–∂–Ω–æ –∞–ø–≥—Ä–µ–π–¥–∏—Ç—å –Ω–∞ **Neon Pro**:
- 10 GB storage
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π autoscaling compute
- Read replicas (–¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫)
- –ë–æ–ª—å—à–µ –±—Ä–∞–Ω—á–µ–π –ë–î

–ù–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ **–±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**! üéâ

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] Neon –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω (—Ä–µ–≥–∏–æ–Ω Frankfurt)
- [ ] Vercel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] SQL —Å—Ö–µ–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ (—Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ Neon SQL Editor
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ Vercel –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Ç–≤–æ–π —Å–∞–π—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Neon Postgres —Å:
- ‚úÖ 512 MB –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ storage
- ‚úÖ –ê–≤—Ç–æ–ø–∞—É–∑–æ–π –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ Serverless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –±—ç–∫–∞–ø–∞–º–∏

–í–æ–ø—Ä–æ—Å—ã? –ü—Ä–æ–±–ª–µ–º—ã? –ü–∏—à–∏! üòä
